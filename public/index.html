<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>CrewUp — Discover Projects & Talent</title>
  <link rel="stylesheet" href="css/styles.css" />
  <script src="js/config.js"></script>
  <script type="module" src="js/firebase-init.js"></script>
</head>
<body>
  <header class="header container">
    <div class="brand">
      <strong>CrewUp</strong>
    </div>
    <nav>
      <a href="explore.html">Explore</a> |
      <a href="create.html">Create</a> |
      <a id="nav-profile" href="login.html">Login</a>
    </nav>
  </header>

  <main class="container">
    <section class="hero card">
      <div>
        <h1>Find projects. Join teams. Build together.</h1>
        <p>Post opportunities or discover projects and people who match your skills.</p>
        <a class="cta" href="explore.html">Explore Opportunities</a>
      </div>
      <aside class="card" style="padding:18px">
        <h3>How it works</h3>
        <ol>
          <li>Create an opportunity or sign up as a talent</li>
          <li>Request to join projects you like</li>
          <li>Collaborate in team spaces with chat and file sharing</li>
        </ol>
      </aside>
    </section>
  </main>

  <footer class="footer">© CrewUp</footer>

  <script type="module">
    import { onAuthStateChanged } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-auth.js";
    const navProfile = document.getElementById('nav-profile');
    // wait until firebase-init sets window.__crewup
    (function waitAuth(){
      if(!window.__crewup){ return setTimeout(waitAuth,50); }
      const { auth } = window.__crewup;
      onAuthStateChanged(auth, user => {
        if(user){
          navProfile.href = "profile.html";
          navProfile.textContent = "Profile";
        } else {
          navProfile.href = "login.html";
          navProfile.textContent = "Login";
        }
      });
    })();
  </script>
</body>
</html>
